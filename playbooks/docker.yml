---
- name: Docker
  hosts: docker
  become: true
  pre_tasks:
    # Required on ARM devices in order to install docker-compose
    - name: Ensure Pip is installed
      ansible.builtin.package:
        name: "{{ pip_package | default('python3-pip') }}"
        state: present
      when: ansible_architecture in ['aarch64', 'armv7l']
  roles:
    - role: geerlingguy.docker
      when: ansible_architecture == 'x86_64'
    - role: geerlingguy.docker_arm
      when: ansible_architecture in ['aarch64', 'armv7l']
